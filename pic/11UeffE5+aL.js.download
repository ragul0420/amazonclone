(function(g){var d=window.AmazonUIPageJS||window.P,h=d._namespace||d.attributeErrors,a=h?h("MalbethAssets",""):d;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,d,h){g.when("bb").execute(function(){var a={CSM_BF_KEY:"csm-bf",isCachedPage:function(){return d.ue&&d.ue.isBF!==h?d.ue.isBF:-1<(localStorage.getItem(a.CSM_BF_KEY)||"").indexOf(d.ue_id)}},b=a.isCachedPage();g.declare("malbeth-cache-check",b)});g.register("malbeth",function(){var a={BUCKET_FOR_USER:"smub",
TIMESTAMP_FOR_BUCKET:"smubt",SLOW_USER_BUCKET:"SLOW",FAST_USER_BUCKET:"FAST",BUCKET_CHANGED:1,BUCKET_UNCHANGED:0,CSM_BUCKET_CHANGE_METRIC:"mubs",CSM_TIMER_METRIC:"mubt",CSM_SLOW_USER_METRIC:"mslow",CSM_TTI_NOT_AVAILABLE:"mnotti",getValue:function(a,c){return localStorage.getItem(a)||c},setValue:function(a,c){localStorage.setItem(a,c)},calculateUserBucket:function(b,c,d,e){var f=c;d===a.SLOW_USER_BUCKET?f=c*(1-e/100):d===a.FAST_USER_BUCKET&&(f=c*(1+e/100));return b>f?a.SLOW_USER_BUCKET:a.FAST_USER_BUCKET},
getBucketChangeStatus:function(b,c){return b===c?a.BUCKET_UNCHANGED:a.BUCKET_CHANGED},sendToCSM:function(a,c){d.ue&&d.ue.count&&d.ue.count(a,c)},getNavigationStartTime:function(){return((d.performance||d.webkitPerformance||{}).timing||{}).navigationStart},initGateway:function(b,c,d){var e=a.getNavigationStartTime();b.t&&b.t.fn&&e?a.calculateBucketAndEmitMetric(c,d,b.t.fn-e):a.sendToCSM(a.CSM_TTI_NOT_AVAILABLE,1)},initSearch:function(b,c,d){b.markers&&b.markers.af&&b.markers.fn&&b.markers.tc?a.calculateBucketAndEmitMetric(c,
d,Math.max(b.markers.fn,b.markers.af)-b.markers.tc):a.sendToCSM(a.CSM_TTI_NOT_AVAILABLE,1)},initDetail:function(b,c,d,e){b=c.getClickToCIPromise();var f=a.getNavigationStartTime();b&&f?b.then(function(b){a.calculateBucketAndEmitMetric(d,e,b.interactiveTime-f)}).catch(function(b){a.sendToCSM(a.CSM_TTI_NOT_AVAILABLE,1)}):a.sendToCSM(a.CSM_TTI_NOT_AVAILABLE,1)},calculateBucketAndEmitMetric:function(b,c,d){var e=a.getValue(a.BUCKET_FOR_USER,""),f=a.getValue(a.TIMESTAMP_FOR_BUCKET,0);b=a.calculateUserBucket(d,
b,e,c);c=Math.floor(new Date/1E3);b===a.SLOW_USER_BUCKET&&a.sendToCSM(a.CSM_SLOW_USER_METRIC,1);a.sendToCSM(a.CSM_BUCKET_CHANGE_METRIC,a.getBucketChangeStatus(e,b));a.sendToCSM(a.CSM_TIMER_METRIC,c-f);a.setValue(a.BUCKET_FOR_USER,b);a.setValue(a.TIMESTAMP_FOR_BUCKET,c)},init:function(b,c,g,e,f){d&&d.ue&&!f&&(f=d.ue,"gateway"===e?a.initGateway(f,b,c):"detail"===e?a.initDetail(f,g,b,c):"search"===e&&a.initSearch(f,b,c))}};return a});g.when("malbeth-page-type").execute(function(a){if(-1!==a.toLowerCase().indexOf("gateway")){var b=
"fn";var c="gateway"}else-1!==a.toLowerCase().indexOf("detail")?(b="dp-time-to-interactive",c="detail"):-1!==a.toLowerCase().indexOf("search")&&(b="load",c="search");g.when("heuristic-tti","malbeth",b,"malbeth-cache-check","malbeth-page-type").execute(function(a,b,d,g){b.init(a,5,d,c,g)})})});